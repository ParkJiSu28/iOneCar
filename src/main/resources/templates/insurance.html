<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i-One Car | 내 견적함</title>
    <link rel="stylesheet" th:href="@{/css/insurance.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 상단 헤더 -->
        <header class="main-header">
            <h1 class="header-title">i-One Car | 내 견적함</h1>
            <button class="close-btn" onclick="history.back()">
                <img src="/css/images/X.png" alt="닫기" class="close-icon">
            </button>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <!-- 제목 섹션 -->
            <div class="title-section">
                <h2 class="main-title">자동차 보험 견적받기</h2>
                <p class="sub-title">i-One Car에서 자동차 보험 견적을 받아보세요</p>
            </div>

            <!-- 자동차 이미지 섹션 -->
            <div class="car-section">
                <div class="car-container">
                    <!-- 차량 이미지 -->
                    <div class="car-illustration">
                        <img src="/css/images/insurance_car.png" alt="자동차 보험 일러스트" class="car-image">
                    </div>
                    
                    <!-- 자동차 부품 아이콘들 -->
                    <div class="part-icon wheel-icon">
                        <img src="/css/images/insurance_wheel.png" alt="휠" class="part-image">
                    </div>
                    
                    <div class="part-icon battery-icon">
                        <img src="/css/images/insurance_battery.png" alt="배터리" class="part-image">
                    </div>
                    
                    <div class="part-icon cylinder-icon">
                        <img src="/css/images/insurance_cylinder.png" alt="실린더" class="part-image">
                    </div>
                    
                    <div class="part-icon engine-icon">
                        <img src="/css/images/insurance_engine.png" alt="엔진" class="part-image">
                    </div>
                    
                    <div class="part-icon oilfilter-icon">
                        <img src="/css/images/insurance_oilfilter.png" alt="오일필터" class="part-image">
                    </div>
                    
                    <div class="part-icon suspension-icon">
                        <img src="/css/images/insurance_suspension.png" alt="서스펜션" class="part-image">
                    </div>
                </div>
            </div>
        </main>

        <!-- 하단 버튼 -->
        <div class="bottom-buttons">
            <button class="btn btn-primary" onclick="openModal()">보험 견적 신청하기</button>
        </div>
    </div>

    <!-- 모달 백그라운드 -->
    <div class="modal-backdrop" id="modalBackdrop" onclick="closeModal()"></div>

    <!-- 하단 슬라이드 모달 -->
    <div class="slide-modal" id="slideModal">
        <!-- 모달 헤더 -->
        <div class="modal-header">
            <button class="modal-close-btn" onclick="closeModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 6L6 18M6 6L18 18" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>

        <!-- 모달 컨텐츠 -->
        <div class="modal-content">
            <h3 class="modal-title">정보 제공 동의하고<br>보험 견적 받기</h3>
            
            <!-- 동의 항목 -->
            <div class="agreement-section">
                <div class="agreement-item">
                    <span class="agreement-text">보험 상품 조회를위한 제3자 정보제공 동의</span>
                    <svg class="arrow-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M6 4L10 8L6 12" stroke="#666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <!-- 버튼 그룹 -->
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">미동의</button>
                <button class="btn btn-primary" onclick="agreeAndProceed()">동의합니다</button>
            </div>
        </div>
    </div>

    <script>
        function openModal() {
            const modalBackdrop = document.getElementById('modalBackdrop');
            const slideModal = document.getElementById('slideModal');
            
            modalBackdrop.classList.add('active');
            slideModal.classList.add('active');
            
            // 스크롤 방지
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modalBackdrop = document.getElementById('modalBackdrop');
            const slideModal = document.getElementById('slideModal');
            
            modalBackdrop.classList.remove('active');
            slideModal.classList.remove('active');
            
            // 스크롤 복원
            document.body.style.overflow = 'auto';
        }

        function agreeAndProceed() {
            // 동의 완료 후 보험 견적 목록 페이지로 이동
            closeModal();
            
            // carSrn 정보를 보험 견적 목록 페이지로 전달
            const urlParams = new URLSearchParams(window.location.search);
            const carSrn = urlParams.get('carSrn');
            
            if (carSrn) {
                window.location.href = '/insurance_list?carSrn=' + carSrn;
            } else {
                window.location.href = '/insurance_list';
            }
        }
    </script>
</body>
</html>
